<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"xdk-nj.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="JavaWeb基础">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaWeb基础">
<meta property="og:url" content="https://xdk-nj.github.io/2021/01/18/JavaWeb%E6%95%B4%E7%90%86/index.html">
<meta property="og:site_name" content="打醒月亮">
<meta property="og:description" content="JavaWeb基础">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-01-18T05:22:04.000Z">
<meta property="article:modified_time" content="2021-01-18T10:34:39.189Z">
<meta property="article:author" content="xudukang">
<meta property="article:tag" content="JavaWeb">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://xdk-nj.github.io/2021/01/18/JavaWeb%E6%95%B4%E7%90%86/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>JavaWeb基础 | 打醒月亮</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="打醒月亮" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">打醒月亮</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://xdk-nj.github.io/2021/01/18/JavaWeb%E6%95%B4%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="xudukang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="打醒月亮">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          JavaWeb基础
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-01-18 13:22:04 / 修改时间：18:34:39" itemprop="dateCreated datePublished" datetime="2021-01-18T13:22:04+08:00">2021-01-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaWeb/" itemprop="url" rel="index"><span itemprop="name">JavaWeb</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>29k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>27 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="JavaWeb基础"><a href="#JavaWeb基础" class="headerlink" title="JavaWeb基础"></a>JavaWeb基础</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Tomcat目录：</span></span><br><span class="line">bin：存放各个平台下启动和停止 Tomcat 服务的脚本⽂件。</span><br><span class="line">conf：存放 Tomcat 服务器的配置⽂件。</span><br><span class="line">lib：存放 Tomcat 服务器所需要的 jar。</span><br><span class="line">logs：存放 Tomcat 服务运⾏的⽇志。</span><br><span class="line">temp：Tomcat 运⾏时的临时⽂件。</span><br><span class="line">webapps：存放允许客户端访问的资源（Java 程序）。</span><br><span class="line">work：存放 Tomcat 将 JSP 转换之后的 Servlet ⽂件。 </span><br></pre></td></tr></table></figure>


<h2 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h2><p>Servlet 是 JavaWeb 开发的基石，与平台无关的服务器组件，运行在 Servlet 容器 / Web 应用服务器 / Tomcat，负责与客户端进行通信。 主要功能：(1) 创建并返回基于客户请求的动态 HTML。 (2) 与数据库通信。</p>
<p>Servlet 是⼀组接口，定义⼀个类并实现 Servlet 接口，该类就具备了接受客户端请求以及做出响应的功能。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>			</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req, ServletResponse res)</span></span></span><br><span class="line"><span class="function">	    <span class="keyword">throws</span> ServletException, IOException</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>浏览器不能直接访问 Servlet ⽂件，只能通过映射的方式来间接访问 ，映射有两种配置方式。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--xml配置方式--&gt;</span>	</span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注解配置，此种方式配置需要修改web.xml  metadata-complete=&quot;false&quot;</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span></span><br><span class="line"><span class="comment">//servlet名称，若不指定，则为Servlet的完整类名</span></span><br><span class="line"><span class="function">String <span class="title">name</span><span class="params">()</span> <span class="keyword">default</span> &quot;&quot;</span>;</span><br><span class="line"><span class="comment">//路径映射,配置多个，需要/开头</span></span><br><span class="line">String[] value() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"><span class="comment">//路径映射,支持配置多个，需要/开头</span></span><br><span class="line">String[] urlPatterns() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"><span class="comment">//标记容器是否在启动应用时就加载Servlet，默认或数值为负数时表示第一次请求Servlet时再加载；</span></span><br><span class="line"><span class="comment">//0或正数表示启动应用就加载</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">loadOnStartup</span><span class="params">()</span> <span class="keyword">default</span> -1</span>;</span><br><span class="line"><span class="comment">//配置初始参数</span></span><br><span class="line">WebInitParam[] initParams() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"><span class="comment">//是否支持异步操作模式</span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">asyncSupported</span><span class="params">()</span> <span class="keyword">default</span> <span class="keyword">false</span></span>;</span><br></pre></td></tr></table></figure>


<h2 id="Servlet生命周期"><a href="#Servlet生命周期" class="headerlink" title="Servlet生命周期"></a>Servlet生命周期</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、当浏览器访问 Servlet 的时候，Tomcat 会查询当前 Servlet 的实例化对象是否存在，如果不存在，则通过反射机制动态创建对象，如果存在，直接执行第 <span class="number">3</span> 步。</span><br><span class="line"><span class="number">2</span>、调⽤ init ⽅法完成初始化操作。</span><br><span class="line"><span class="number">3</span>、调⽤ service ⽅法完成业务逻辑操作。</span><br><span class="line"><span class="number">4</span>、关闭 Tomcat 时，会调⽤ destory ⽅法，释放当前对象所占⽤的资源。</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Servlet 的⽣命周期⽅法：⽆参构造函数、init、service、destory</span><br><span class="line"><span class="number">1</span>、⽆参构造函数只调⽤⼀次，创建对象。</span><br><span class="line"><span class="number">2</span>、init 只调⽤⼀次，初始化对象。</span><br><span class="line"><span class="number">3</span>、service 调⽤ N 次，执⾏业务⽅法。</span><br><span class="line"><span class="number">4</span>、destory 只调⽤⼀次，卸载对象。</span><br></pre></td></tr></table></figure>


<h2 id="ServletConfig"><a href="#ServletConfig" class="headerlink" title="ServletConfig"></a>ServletConfig</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该接⼝是⽤来描述 Servlet 的基本信息的。</span></span><br><span class="line">getServletName()  <span class="comment">//返回 Servlet 的名称，全类名(带着包名的类名)</span></span><br><span class="line">getInitParameter(String key)  <span class="comment">//获取 init 参数的值（web.xml）</span></span><br><span class="line">getInitParameterNames()  <span class="comment">//返回所有的 initParamter 的 name 值，⼀般⽤作遍历初始化参数</span></span><br><span class="line">getServletContext()  <span class="comment">//返回 ServletContext 对象，它是 Servlet 的上下⽂，整个 Servlet 的管理者。</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>myServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>servlet.MyServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>name<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>password<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>myServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/myServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">       <span class="comment">// xml中配置的servlet-name</span></span><br><span class="line">       String servletName = config.getServletName();</span><br><span class="line">       System.out.println(<span class="string">&quot;servletName: &quot;</span> + servletName);</span><br><span class="line">	<span class="comment">// xml中配置的name</span></span><br><span class="line">       System.out.println(config.getInitParameter(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">	<span class="comment">// xml中配置的多个参数</span></span><br><span class="line">       Enumeration&lt;String&gt; names = config.getInitParameterNames();</span><br><span class="line">       <span class="keyword">while</span> (names.hasMoreElements()) &#123;</span><br><span class="line">           String key = names.nextElement();</span><br><span class="line">           String val = config.getInitParameter(key);</span><br><span class="line">           System.out.println(<span class="string">&quot;key:&quot;</span> + key + <span class="string">&quot;--&quot;</span> + <span class="string">&quot;val:&quot;</span> + val);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">// servlet上下文，整个servlet管理者</span></span><br><span class="line">       ServletContext context = config.getServletContext();</span><br><span class="line">       System.out.println(context.getContextPath());</span><br><span class="line">       System.out.println(context.getServerInfo());</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>


<h2 id="ServletConfig-和-ServletContext"><a href="#ServletConfig-和-ServletContext" class="headerlink" title="ServletConfig 和 ServletContext"></a>ServletConfig 和 ServletContext</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ServletConfig 作⽤于某个 Servlet 实例，每个 Servlet 都有对应的 ServletConfig，是⼀个是局部对象。</span><br><span class="line"></span><br><span class="line">ServletContext 作⽤于整个 Web 应⽤，⼀个 Web 应⽤对应⼀个 ServletContext，多个 Servlet 实例对应⼀个ServletContext。是一个全局对象，应用程序启动时创建，应用程序关闭时销毁。</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;context-param&gt;</span><br><span class="line">    &lt;param-name&gt;url&lt;/param-name&gt;</span><br><span class="line">    &lt;param-value&gt;www.bd.com&lt;/param-value&gt;</span><br><span class="line">&lt;/context-param&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取方法：</span></span><br><span class="line">ServletContext servletContext = req.getServletContext();</span><br><span class="line">String url = servletContext.getInitParameter(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">System.out.println(url);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改/添加方法：数据存储形式类似于一个Map</span></span><br><span class="line">servletContext.setAttribute(<span class="string">&quot;appInfo&quot;</span>,<span class="string">&quot;www.bd.com&quot;</span>);</span><br><span class="line">String appInfo = (String)servletContext.getAttribute(<span class="string">&quot;appInfo&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;TestServlet appInfo=&quot;</span> + appInfo);</span><br></pre></td></tr></table></figure>


<h2 id="Servlet-的层次结构"><a href="#Servlet-的层次结构" class="headerlink" title="Servlet 的层次结构"></a>Servlet 的层次结构</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Servlet  ---&gt; GenericServlet  ---&gt; HttpServlet</span><br><span class="line"></span><br><span class="line">GenericServlet 实现 Servlet 接⼝，同时为它的⼦类屏蔽了不常⽤的⽅法，⼦类只需要重写 service ⽅法即可。</span><br><span class="line">HttpServlet 继承 GenericServlet，根据请求进⾏分发处理，GET 进⼊ doGET ⽅法，POST 进⼊doPOST ⽅法。</span><br><span class="line">开发者⾃定义的 Servlet 类只需要继承 HttpServlet 即可，重写 doGET 和 doPOST。</span><br></pre></td></tr></table></figure>


<h2 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">JSP 本质上就是⼀个 Servlet，主要负责与⽤户交互，呈现界⾯，是HTML + JS + CSS + Java 的混合⽂件。</span><br><span class="line"></span><br><span class="line">当服务器接收到⼀个后缀是 jsp 的请求时，将该请求交给 JSP 引擎去处理，每⼀个 JSP ⻚⾯第⼀次被访问的时候，JSP 引擎会将它翻译成⼀个 Servlet ⽂件，再由 Web 容器调⽤ Servlet 完成响应。</span><br><span class="line"></span><br><span class="line">单纯从开发的⻆度看，JSP 就是在 HTML 中嵌⼊ Java 程序。具体的嵌⼊⽅式有 <span class="number">3</span> 种：</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>、JSP 脚本，执⾏ Java 逻辑代码</span><br><span class="line">&lt;% Java代码 %&gt;</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、JSP 声明：定义 Java ⽅法</span><br><span class="line">&lt;%! 声明 Java ⽅法 %&gt;</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、JSP 表达式：把 Java 对象直接输出到 HTML ⻚⾯中</span><br><span class="line">&lt;%= Java变量 %&gt;</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line">&lt;%! <span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="string">&quot;HelloWorld&quot;</span>; &#125; %&gt;</span><br><span class="line">&lt;% String str = test(); %&gt;</span><br><span class="line">&lt;%=str%&gt;</span><br></pre></td></tr></table></figure>
<p><strong>内置对象</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、request：表示⼀次请求，HttpServletRequest。 </span><br><span class="line"><span class="number">2</span>、response：表示⼀次响应，HttpServletResponse。 </span><br><span class="line"><span class="number">3</span>、pageContext：⻚⾯上下⽂，获取⻚⾯信息，PageContext。 </span><br><span class="line"><span class="number">4</span>、session：表示⼀次会话，保存⽤户信息，HttpSession。</span><br><span class="line"><span class="number">5</span>、application：表示当前 Web 应⽤，全局对象，保存所有⽤户共享信息，ServletContext。 </span><br><span class="line"><span class="number">6</span>、config：当前 JSP 对应的 Servlet 的 ServletConfig 对象，获取当前 Servlet 的信息。</span><br><span class="line"><span class="number">7</span>、out：向浏览器输出数据，JspWriter。 </span><br><span class="line"><span class="number">8</span>、page：当前 JSP 对应的 Servlet 对象，Servlet。 </span><br><span class="line"><span class="number">9</span>、exception：表示 JSP ⻚⾯发⽣的异常，Exception。</span><br><span class="line">常⽤的是 request、response、session、application</span><br></pre></td></tr></table></figure>


<h2 id="转发与重定向"><a href="#转发与重定向" class="headerlink" title="转发与重定向"></a>转发与重定向</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">response   <span class="title">sendRedirect</span><span class="params">(String path)</span>  重定向。</span></span><br><span class="line"><span class="function">request    <span class="title">getRequestDispatcher</span><span class="params">(String path)</span>  请求转发。</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">区别：</span></span><br><span class="line"><span class="function">转发是将同⼀个请求传给下⼀个页面，重定向是创建⼀个新的请求传给下⼀个页面，之前的请求结束生命周期。</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">转发：同⼀个请求在服务器之间传递，地址栏不变，也叫服务器跳转, 可以用来访问WEB-INF下的文件。</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">重定向：由客户端发送⼀次新的请求来访问跳转后的⽬标资源，地址栏改变，也叫客户端跳转。如果没有加 http 开头，则认为是当前应用里面的servlet重定向，默认加上应用上下文；如果有加http则会使用配置的全路径进行跳转。可用于跳转第三方地址或者应用里面的其他Servelt、jsp等。</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">如果两个⻚⾯之间需要通过 request 来传值，则必须使⽤转发，不能使⽤重定向。例如⽤户登录，如果⽤户名和密码正确，则跳转到⾸⻚（转发），并且展示⽤户名，否则重新回到登录⻚⾯（重定向）。</span></span><br></pre></td></tr></table></figure>


<h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">背景：HTTP协议为无状态协议，即同一个用户发出多个请求时，服务器是没有办法确定用户和请求的关系。因此需要在用户第一次请求后给用户分配一个唯一标识的ID, 用户之后的每次请求都会带上这个ID, 方便服务器进行识别。</span><br><span class="line"></span><br><span class="line">会话：就是客户端和服务器之间发⽣的⼀系列连续的请求和响应的过程，打开浏览器进⾏操作到关闭浏览器的过程。</span><br><span class="line"></span><br><span class="line">实现会话有两种⽅式：session 和 cookie</span><br></pre></td></tr></table></figure>
<p>属于同⼀次会话的请求都有⼀个相同的标识符，sessionID</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">session 常⽤⽅法：</span><br><span class="line"><span class="function">String <span class="title">getId</span><span class="params">()</span>  获取 sessionID</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setMaxInactiveInterval</span><span class="params">(<span class="keyword">int</span> interval)</span>  设置 session 的失效时间，单位为秒</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getMaxInactiveInterval</span><span class="params">()</span>  获取当前 session 的失效时间</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">invalidate</span><span class="params">()</span>  设置 session ⽴即失效</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setAttribute</span><span class="params">(String key,Object value)</span>  通过键值对的形式来存储数据</span></span><br><span class="line"><span class="function">Object <span class="title">getAttribute</span><span class="params">(String key)</span>  通过键获取对应的数据</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeAttribute</span><span class="params">(String key)</span>  通过键删除对应的数据</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// session例子</span></span><br><span class="line">&lt;form action=<span class="string">&quot;/login&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;</span><br><span class="line">    密码：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;password&quot;</span>&gt;</span><br><span class="line">    提交：&lt;input type=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String name = req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String passwd = req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        HttpSession session = req.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">        resp.sendRedirect(<span class="string">&quot;/welcome.jsp&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>服务器会为每一个会话在内存中创建Session对象，用以维护每个会话的数据信息，和cookie一样，都有有效期限，修改方法只能是Web.xml内配置，因此每个Session的失效时间一致(根据没有再次操作的时间而定）。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>30<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p>Cookie 是服务端在 HTTP 响应中附带传给浏览器的⼀个⼩⽂本⽂件，⼀旦浏览器保存了某个 Cookie，在之后的请求和响应过程中，会将此 Cookie 来回传递，这样就可以通过 Cookie 这个载体完成客户端和服务端的数据交互。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置cookie</span></span><br><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;xdk&quot;</span>);</span><br><span class="line">response.addCookie(cookie);</span><br><span class="line"><span class="comment">// 读取cookie</span></span><br><span class="line">Cookie[] cookies = request.getCookies();</span><br><span class="line"><span class="keyword">for</span> (Cookie c : cookies) &#123;</span><br><span class="line">    out.write(c.getName() + <span class="string">&quot;:&quot;</span> + c.getValue() + <span class="string">&quot;&lt;br/&gt;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Webstorm-a2712ae8:0506f447-9cd4-4f79-<span class="number">9582</span>-788ab94be447</span><br><span class="line">Webstorm-44113bc2:<span class="number">55203481</span>-22c1-47c1-a41c-b7097d77da6a</span><br><span class="line">Idea-cfa6297b:5a0327c9-3f31-43d0-9a69-75394f25a2e4</span><br><span class="line">JSESSIONID:D947B13E550B7C0336A8E735DDA3B6A1</span><br><span class="line">name:xdk</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Cookie 常⽤的⽅法</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setMaxAge</span><span class="params">(<span class="keyword">int</span> age)</span>  <span class="comment">//设置 Cookie 的有效时间，单位为秒</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getMaxAge</span><span class="params">()</span>  <span class="comment">//获取 Cookie 的有效时间</span></span></span><br><span class="line"><span class="function">String <span class="title">getName</span><span class="params">()</span>  <span class="comment">//获取 Cookie 的 name</span></span></span><br><span class="line"><span class="function">String <span class="title">getValue</span><span class="params">()</span>  <span class="comment">//获取 Cookie 的 value</span></span></span><br></pre></td></tr></table></figure>


<h2 id="Session-和-Cookie-的区别"><a href="#Session-和-Cookie-的区别" class="headerlink" title="Session 和 Cookie 的区别"></a>Session 和 Cookie 的区别</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">session：保存在服务器  保存的数据是 Object  会随着会话的结束⽽销毁              保存重要信息</span><br><span class="line">cookie： 保存在浏览器  保存的数据是 String  可以⻓期保存在浏览器中，与会话⽆关   保存不重要信息</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">session 存储信息：</span><br><span class="line">setAttribute(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;admin&quot;</span>)  <span class="comment">//存    </span></span><br><span class="line">getAttribute(<span class="string">&quot;name&quot;</span>)  <span class="comment">//取</span></span><br><span class="line"></span><br><span class="line">session⽣命周期：</span><br><span class="line">服务端：只要 WEB 应⽤重启就销毁，客户端：只要浏览器关闭就销毁。</span><br><span class="line"></span><br><span class="line">session退出登录：session.invalidate()</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cookie 存储信息：</span><br><span class="line">response.addCookie(<span class="keyword">new</span> Cookie(name,<span class="string">&quot;admin&quot;</span>)) <span class="comment">//存</span></span><br><span class="line"></span><br><span class="line">Cookie[] cookies = request.getCookies();</span><br><span class="line"><span class="keyword">for</span> (Cookie cookie : cookies)&#123;</span><br><span class="line">    <span class="keyword">if</span>(cookie.getName().equals(<span class="string">&quot;name&quot;</span>))&#123;</span><br><span class="line">       out.write(<span class="string">&quot;欢迎回来&quot;</span>+cookie.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="comment">//取</span></span><br><span class="line"></span><br><span class="line">cookie⽣命周期：</span><br><span class="line">不随服务端的重启⽽销毁，客户端：默认是只要关闭浏览器就销毁，我们通过 setMaxAge()⽅法设置有效期，⼀旦设置了有效期，则不随浏览器的关闭⽽销毁，⽽是由设置的时间来决定。</span><br><span class="line"></span><br><span class="line">cookie 退出登录：setMaxAge(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Cookie 和 Session 一定是结合起来使用。用户第一次请求时，服务器会创建一个SessionId并返回给用户，用户之后的请求都会带上这个SessionId，并且会在内存里分配Session对象，当用户再次请求时，服务器会根据SessionId获取对应的Session数据。SessionId会有httponly的属性，不可JS获取。Cookie保存在浏览器，Session保存在服务器，Session依赖于Cookie。</p>
</blockquote>
<h2 id="JSP-内置对象作用域"><a href="#JSP-内置对象作用域" class="headerlink" title="JSP 内置对象作用域"></a>JSP 内置对象作用域</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">page、request、session、application</span><br><span class="line"></span><br><span class="line">page 作⽤域：对应的内置对象是 pageContext。</span><br><span class="line">request 作⽤域：对应的内置对象是 request。</span><br><span class="line">session 作⽤域：对应的内置对象是 session。</span><br><span class="line">application 作⽤域：对应的内置对象是 application。</span><br><span class="line"></span><br><span class="line">page  &lt;  request  &lt;  session  &lt;  application</span><br><span class="line"></span><br><span class="line">page 只在当前页面有效。</span><br><span class="line">request 在⼀次请求内有效。</span><br><span class="line">session 在⼀次会话内有效。</span><br><span class="line">application 对应整个 WEB 应⽤的。</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line"> Integer count = (Integer) application.getAttribute(<span class="string">&quot;count&quot;</span>);</span><br><span class="line"> <span class="keyword">if</span>(count == <span class="keyword">null</span>)&#123;</span><br><span class="line"> 	count = <span class="number">1</span>;</span><br><span class="line"> 	application.setAttribute(<span class="string">&quot;count&quot;</span>,count);</span><br><span class="line"> &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"> 	count++;</span><br><span class="line"> 	application.setAttribute(<span class="string">&quot;count&quot;</span>,count);</span><br><span class="line"> &#125;</span><br><span class="line">%&gt;</span><br><span class="line">您是当前的第&lt;%=count%&gt;位访客</span><br></pre></td></tr></table></figure>


<h2 id="EL-表达式"><a href="#EL-表达式" class="headerlink" title="EL 表达式"></a>EL 表达式</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">便捷地取出域对象（pageContext、request、session、application）中保存的数据。</span><br><span class="line">$&#123;变量名&#125; 变量名就是 setAttribute 对应的 key 值。</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>、默认查找顺序：</span><br><span class="line">按照上述的顺序进⾏查找，找到⽴即返回，在 application 中也⽆法找到，则返回 <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、指定作⽤域进⾏查找</span><br><span class="line">pageContext：$&#123;pageScope.name&#125;</span><br><span class="line">request：$&#123;requestScope.name&#125;</span><br><span class="line">session：$&#123;sessionScope.name&#125;</span><br><span class="line">application：$&#123;applicationScope.name&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">数据级联：$&#123;user.name&#125;</span><br><span class="line"></span><br><span class="line">EL 执⾏表达式:</span><br><span class="line">$&#123;num1 &amp;&amp; num2&#125;   &amp;&amp;   ||   !   &lt;   &gt;   &lt;=   &lt;=   ==   </span><br><span class="line">&amp;&amp; and    || or   ! not   == eq   != ne</span><br><span class="line">&lt; lt    &gt; gt     &lt;= le    &gt;= ge</span><br><span class="line">empty 变量为 <span class="keyword">null</span>，长度为<span class="number">0</span>的String，size为<span class="number">0</span>的集合</span><br><span class="line"></span><br><span class="line">&lt;!--<span class="keyword">true</span>--&gt;</span><br><span class="line">&lt;h3&gt;$&#123;10 &gt; 9&#125;&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--<span class="keyword">false</span>--&gt;</span><br><span class="line">&lt;h3&gt;$&#123;&quot;1000&quot; &gt; &quot;9&quot;&#125;&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--<span class="keyword">false</span>--&gt;</span><br><span class="line">&lt;h3&gt;$&#123;&quot;1&quot; &gt; &quot;2&quot;&#125;&lt;/h3&gt;</span><br></pre></td></tr></table></figure>


<h2 id="JSTL"><a href="#JSTL" class="headerlink" title="JSTL"></a>JSTL</h2><p>常⽤标签： set、out、remove、catch</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入依赖 --&gt;</span>	</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>set：向域对象中添加数据</p>
<p>out：输出域对象中的数据</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:set var=&quot;name&quot; value=&quot;tom&quot;&gt;&lt;/c:set&gt; </span><br><span class="line">&lt;c:out value=&quot;$&#123;name&#125;&quot; default=&quot;未定义&quot;&gt;&lt;/c:out&gt;</span><br></pre></td></tr></table></figure>
<p>remove：删除域对象中的数据</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:remove var=&quot;name&quot; scope=&quot;page&quot;&gt;&lt;/c:remove&gt; </span><br><span class="line">&lt;c:out value=&quot;$&#123;name&#125;&quot; default=&quot;未定义&quot;&gt;&lt;/c:out&gt;</span><br></pre></td></tr></table></figure>
<p>catch：捕获异常</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:catch var=&quot;error&quot;&gt;</span><br><span class="line"> 	&lt;% int a = 10/0; %&gt;</span><br><span class="line">&lt;/c:catch&gt;</span><br><span class="line">$&#123;error&#125;</span><br></pre></td></tr></table></figure>
<p>条件标签：if choose</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:set var=&quot;num1&quot; value=&quot;1&quot;&gt;&lt;/c:set&gt; &lt;c:set var=&quot;num2&quot; value=&quot;2&quot;&gt;&lt;/c:set&gt; </span><br><span class="line">&lt;c:if test=&quot;$&#123;num1&gt;num2&#125;&quot;&gt;ok&lt;/c:if&gt; </span><br><span class="line">&lt;c:if test=&quot;$&#123;num1&lt;num2&#125;&quot;&gt;fail&lt;/c:if&gt; <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;c:choose&gt;</span><br><span class="line"> &lt;c:when test=&quot;$&#123;num1 &gt; num2&#125;&quot;&gt;ok&lt;/c:when&gt;</span><br><span class="line"> &lt;c:otherwise&gt;fail&lt;/c:otherwise&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br></pre></td></tr></table></figure>
<p>迭代标签：forEach</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:forEach items=&quot;$&#123;list&#125;&quot; var=&quot;str&quot; begin=&quot;2&quot; end=&quot;3&quot; step=&quot;2&quot; varStatus=&quot;sta&quot;&gt;</span><br><span class="line"> $&#123;sta.count&#125;、$&#123;str&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>
<p>格式化标签库常⽤的标签：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;% request.setAttribute(&quot;date&quot;,new Date()); %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">fmt:formatDate</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;date&#125;&quot;</span> <span class="attr">pattern</span>=<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">fmt:formatDate</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">fmt:formatNumber</span> <span class="attr">value</span>=<span class="string">&quot;2145.234&quot;</span> <span class="attr">maxIntegerDigits</span>=<span class="string">&quot;2&quot;</span> <span class="attr">maxFractionDigits</span>=<span class="string">&quot;3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">fmt:formatNumber</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>函数标签库常⽤的标签：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;% request.setAttribute(&quot;info&quot;,&quot;Java,C&quot;); %&gt;</span><br><span class="line">$&#123;fn:contains(info,&quot;Python&quot;)&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">$&#123;fn:startsWith(info, &quot;Java&quot;)&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">$&#123;fn:endsWith(info, &quot;C&quot;)&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">$&#123;fn:indexOf(info, &quot;va&quot;)&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">$&#123;fn:replace(info, &quot;C&quot;,&quot;Python&quot;)&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">$&#123;fn:substring(info, 2, 3)&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">$&#123;fn:split(info, &quot;,&quot;)[0]&#125;-$&#123;fn:split(info, &quot;,&quot;)[1]&#125;</span><br></pre></td></tr></table></figure>


<h2 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">动态地拦截请求和响应，变换或使用包含在请求或响应中的信息</span><br><span class="line">在客户端的请求访问后端资源之前，拦截这些请求</span><br><span class="line">在服务器的响应发送回客户端之前，处理这些响应</span><br></pre></td></tr></table></figure>
<p>开发者只需要自定义⼀个类并且实现Filter接⼝即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CharacterEncodingFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;&#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">                         ServletResponse response,</span></span></span><br><span class="line"><span class="function"><span class="params">                         FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- xml配置方式 --&gt;</span>	</span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>myfilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>myfilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/test<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注解配置</span></span><br><span class="line"><span class="meta">@WebFilter(urlPatterns = &#123;&quot;/test&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CharacterEncodingFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 该Filter是否支持异步操作模式</span></span><br><span class="line">asyncSupported      </span><br><span class="line"><span class="comment">// 指定Filter对那种dispatcher模式进行过滤 该属性支持 Async,Error Forward,include,request  </span></span><br><span class="line">dispatcherType  </span><br><span class="line"><span class="comment">// Filter 显示的名称</span></span><br><span class="line">displayName    </span><br><span class="line"><span class="comment">// Filter的名称</span></span><br><span class="line">filterName    </span><br><span class="line"><span class="comment">// Filter的配置参数</span></span><br><span class="line">initParams    </span><br><span class="line"><span class="comment">// 过滤的Servlet可以指定多个,表示对这几个特定的的servlet 进行过滤</span></span><br><span class="line">servletNames    </span><br><span class="line"><span class="comment">// 指定 Filter拦截的 URL，和上面的servletNames配置一样，用*可以表示通配符，但是不用字母后加*，应该按照模块划分，比如/user/*</span></span><br><span class="line">urlPatterns/value    </span><br></pre></td></tr></table></figure>
<p><strong>Filter 的生命周期</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">当 Tomcat 启动时，通过反射机制调⽤ Filter 的⽆参构造函数创建实例化对象，同时调⽤ init ⽅法实现初始化，doFilter ⽅法调⽤多次，当 Tomcat 服务关闭的时候，调⽤ destory 来销毁 Filter 对象。</span><br><span class="line"></span><br><span class="line">⽆参构造函数：只调⽤⼀次，当 Tomcat 启动时调⽤（Filter ⼀定要进⾏配置）</span><br><span class="line">init ⽅法：只调⽤⼀次，当 Filter 的实例化对象创建完成之后调⽤</span><br><span class="line">doFilter：调⽤多次，访问 Filter 的业务逻辑都写在 Filter 中</span><br><span class="line">destory：只调⽤⼀次，Tomcat 关闭时调⽤。</span><br><span class="line"></span><br><span class="line">同时配置多个 Filter，Filter 的调⽤顺序是由 web.xml 中的配置顺序来决定的，写在上⾯的配置先调⽤，因为 web.xml 是从上到下顺序读取的。</span><br></pre></td></tr></table></figure>


<h2 id="Listener"><a href="#Listener" class="headerlink" title="Listener"></a>Listener</h2><p>JavaWeb里面的监听器：ServletContextListener,  HttpSessionListener,  ServletRequestListener。</p>
<p>实现步骤：创建Java类 → 继承监听接口 → 实现监听方法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前在线人数：&lt;%= session.getServletContext().getAttribute(&quot;count&quot;)%&gt;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SessionListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionListener</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionCreated</span><span class="params">(HttpSessionEvent se)</span> </span>&#123;</span><br><span class="line">        ServletContext servletContext = se.getSession().getServletContext();</span><br><span class="line">        Integer count = (Integer)servletContext.getAttribute(<span class="string">&quot;count&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == count) &#123;</span><br><span class="line">            count = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;count&quot;</span>, count);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionDestroyed</span><span class="params">(HttpSessionEvent se)</span> </span>&#123;</span><br><span class="line">        ServletContext servletContext = se.getSession().getServletContext();</span><br><span class="line">        Integer count = (Integer)servletContext.getAttribute(<span class="string">&quot;count&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == count) &#123;</span><br><span class="line">            count = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            count--;</span><br><span class="line">        &#125;</span><br><span class="line">        servletContext.setAttribute(<span class="string">&quot;count&quot;</span>, count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/upload&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;img&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/upload&quot;)</span></span><br><span class="line"><span class="meta">@MultipartConfig</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UploadServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">//获取文件名称</span></span><br><span class="line">        Part part = req.getPart(<span class="string">&quot;img&quot;</span>);</span><br><span class="line">        String header = part.getHeader(<span class="string">&quot;content-disposition&quot;</span>);</span><br><span class="line">        String filename = header.substring(header.indexOf(<span class="string">&quot;filename=&quot;</span>) + <span class="number">10</span>, header.length() - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取路径  E:\IDEAWorkSpace\javaweb-filter\target\javaweb-filter-1.0-SNAPSHOT\file</span></span><br><span class="line">        String dirPath = req.getServletContext().getRealPath(<span class="string">&quot;/file&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建文件夹</span></span><br><span class="line">        File dirFile = <span class="keyword">new</span> File(dirPath);</span><br><span class="line">        <span class="keyword">if</span> (!dirFile.exists()) &#123;</span><br><span class="line">            dirFile.mkdirs();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//为文件重新设置文件名</span></span><br><span class="line">        String finalName = UUID.randomUUID().toString() + filename;</span><br><span class="line">        <span class="comment">//创建文件</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(dirFile, finalName);</span><br><span class="line">        <span class="comment">//流操作</span></span><br><span class="line">        InputStream inputStream = part.getInputStream();</span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">        <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] temp = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span> ((len = inputStream.read(temp)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            fos.write(temp, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        fos.close();</span><br><span class="line">        inputStream.close();</span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;/file/&quot;</span> + finalName).forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/download&quot;</span>&gt;</span>下载<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/download&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DownloadServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        resp.setContentType(<span class="string">&quot;application/x-msdownload&quot;</span>);</span><br><span class="line">        String file = <span class="string">&quot;3.jpg&quot;</span>;</span><br><span class="line">        String path = req.getServletContext().getRealPath(<span class="string">&quot;/file/&quot;</span>);</span><br><span class="line">        String filePath = path + file;</span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(filePath);</span><br><span class="line">        resp.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;attachment; filename=&quot;</span> + file);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果文件名不包含中文可以不设置该项</span></span><br><span class="line">        <span class="comment">//如果包含中文名，则需要设置编码，否则文件名下载后中文字符会乱码</span></span><br><span class="line">        <span class="comment">//getBytes指定了编码的方式，ISO-8859-1指定了解码（读取）的方式,想要转换编码，就是先编码，再解码</span></span><br><span class="line">        <span class="comment">//response.setHeader(&quot;Content-Disposition&quot;,&quot;attachment; filename=&quot; + new String(file.getBytes(&quot;gb2312&quot;),&quot;ISO-8859-1&quot;));</span></span><br><span class="line"></span><br><span class="line">        ServletOutputStream out = resp.getOutputStream();</span><br><span class="line">        <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len = fis.read(buf)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            out.write(buf,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">        out.close();</span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h2><p>Asynchronous JavaScript And XML：异步的 JavaScript 和 XML 。Ajax指异步加载，客户端和服务器的数据交互更新在局部页面的技术（局部刷新）。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;h2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&quot;#btn&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">                url: <span class="string">&quot;/test&quot;</span>,</span></span><br><span class="line"><span class="javascript">                type: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="javascript">                dataType: <span class="string">&quot;text&quot;</span>,</span></span><br><span class="line"><span class="javascript">                success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">&quot;#h2&quot;</span>).html(data)</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Servlet 不能跳转到 JSP，只能将数据返回。</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        String str = <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">        resp.getWriter().write(str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">语法：$.ajax(&#123;属性&#125;)</span><br><span class="line"></span><br><span class="line">常⽤的属性参数：</span><br><span class="line">url：请求的后端服务地址</span><br><span class="line">type：请求方式，默认 get</span><br><span class="line">data：请求参数</span><br><span class="line">dataType：服务器返回的数据类型，text/json</span><br><span class="line">success：请求成功的回调函数</span><br><span class="line">error：请求失败的回调函数</span><br><span class="line">complete：请求完成的回调函数（无论成功或者失败，都会调用）</span><br></pre></td></tr></table></figure>


<h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><p>JavaScript Object Notation，⼀种轻量级数据交互格式，完成 js 与 Java 等后端开发语⾔对象数据之间的转换客户端和服务器之间传递对象数据，需要⽤ JSON 格式。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User(<span class="number">1</span>, <span class="string">&quot;aa&quot;</span>, <span class="string">&quot;bb&quot;</span>);</span><br><span class="line">        String json = <span class="keyword">new</span> ObjectMapper().writeValueAsString(user);</span><br><span class="line">        resp.getWriter().write(json);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">&quot;#btn&quot;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">                url: <span class="string">&quot;/json&quot;</span>,</span></span><br><span class="line"><span class="javascript">                type: <span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="javascript">                dataType: <span class="string">&quot;json&quot;</span>,</span></span><br><span class="line"><span class="javascript">                success: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(data)</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">结果：&#123;id: 1, name: &quot;aa&quot;, address: &quot;bb&quot;&#125;</span><br></pre></td></tr></table></figure>


<h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">JDBC 的使用</span><br><span class="line"><span class="number">1</span>、加载数据库驱动，Java 程序和数据库之间的桥梁。</span><br><span class="line"><span class="number">2</span>、获取 Connection，Java 程序与数据库的⼀次连接。</span><br><span class="line"><span class="number">3</span>、创建 Statement 对象，由 Connection 产⽣，执⾏ SQL 语句。</span><br><span class="line"><span class="number">4</span>、如果需要接收返回值，创建 ResultSet 对象，保存 Statement 执行之后所查询到的结果。</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">           String url = <span class="string">&quot;jdbc:mysql://localhost:3306/springboot?useUnicode=true&amp;characterEncoding=UTF-8&quot;</span>;</span><br><span class="line">           String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">           String password = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line"></span><br><span class="line">           Connection con = DriverManager.getConnection(url, username, password);</span><br><span class="line">           <span class="comment">//增 删 改 都与此类似</span></span><br><span class="line">           String sql1 = <span class="string">&quot;insert into book (author,name) values (&#x27;薛之谦&#x27;,&#x27;动物世界&#x27;)&quot;</span>;</span><br><span class="line">           Statement statement = con.createStatement();</span><br><span class="line">           <span class="keyword">int</span> row = statement.executeUpdate(sql1);</span><br><span class="line">           System.out.println(row);</span><br><span class="line">       &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">           throwables.printStackTrace();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查询</span></span><br><span class="line">String sql1 = <span class="string">&quot;select * from book&quot;</span>;</span><br><span class="line">Statement statement = con.createStatement();</span><br><span class="line">ResultSet resultSet = statement.executeQuery(sql1);</span><br><span class="line"><span class="keyword">while</span> (resultSet.next()) &#123;</span><br><span class="line">     Integer id = resultSet.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">     String author = resultSet.getString(<span class="string">&quot;author&quot;</span>);</span><br><span class="line">     String name = resultSet.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">     System.out.println(id + <span class="string">&quot;-&quot;</span> + author + <span class="string">&quot;-&quot;</span> + name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="PreparedStatement"><a href="#PreparedStatement" class="headerlink" title="PreparedStatement"></a>PreparedStatement</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Statement 的⼦类，提供了 SQL 占位符的功能</span><br><span class="line"></span><br><span class="line">使⽤ Statement 进⾏开发有两个问题：</span><br><span class="line"><span class="number">1</span>、需要频繁拼接 String 字符串，出错率较⾼。</span><br><span class="line"><span class="number">2</span>、存在 SQL 注⼊的⻛险。</span><br><span class="line"></span><br><span class="line">SQL 注⼊：利⽤某些系统没有对⽤户输⼊的信息进⾏充分检测，在⽤户输⼊的数据中注⼊⾮法的 SQL语句，从⽽利⽤系统的 SQL 引擎完成恶意⾏为的做法。</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">           String url = <span class="string">&quot;jdbc:mysql://localhost:3306/springboot?useUnicode=true&amp;characterEncoding=UTF-8&quot;</span>;</span><br><span class="line">           String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">           String password = <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">           Connection con = DriverManager.getConnection(url, username, password);</span><br><span class="line"></span><br><span class="line">           String sql1 = <span class="string">&quot;select * from book where id = ?&quot;</span>;</span><br><span class="line">           PreparedStatement preparedStatement = con.prepareStatement(sql1);</span><br><span class="line">           preparedStatement.setInt(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">           ResultSet resultSet = preparedStatement.executeQuery();</span><br><span class="line">           <span class="keyword">while</span> (resultSet.next()) &#123;</span><br><span class="line">               Integer id = resultSet.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">               String author = resultSet.getString(<span class="string">&quot;author&quot;</span>);</span><br><span class="line">               String name = resultSet.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">               System.out.println(id + <span class="string">&quot;-&quot;</span> + author + <span class="string">&quot;-&quot;</span> + name);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">           throwables.printStackTrace();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>


<h2 id="数据库连接池"><a href="#数据库连接池" class="headerlink" title="数据库连接池"></a>数据库连接池</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">JDBC 开发流程</span><br><span class="line">- 加载驱动（只需要加载⼀次）</span><br><span class="line">- 建⽴数据库连接（Connection）</span><br><span class="line">- 执⾏ SQL 语句（Statement）</span><br><span class="line">- ResultSet 接收结果集（查询）</span><br><span class="line">- 断开连接，释放资源</span><br><span class="line"></span><br><span class="line">数据库连接对象是通过 DriverManager 来获取的，每次获取都需要向数据库申请获取连接，验证⽤户名和密码，执⾏完 SQL 语句后断开连接，这样的⽅式会造成资源的浪费，数据连接资源没有得到很好的重复利⽤。可以使⽤数据库连接池解决这⼀问题。</span><br><span class="line"></span><br><span class="line">数据库连接池的基本思想就是为数据库建⽴⼀个缓冲池，预先向缓冲池中放⼊⼀定数量的连接对象，当需要获取数据库连接的时候，只需要从缓冲池中取出⼀个对象，⽤完之后再放回到缓冲池中，供下⼀次请求使⽤，做到了资源的重复利⽤，允许程序重复使⽤⼀个现有的数据库连接对象，⽽不需要重新创建。当数据库连接池中没有空闲的连接时，新的请求就会进⼊等待队列，等待其他线程释放连接。</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入依赖 --&gt;</span>	</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">将 C3P0 的配置信息定义在 xml ⽂件中，Java 程序只需要加载配置⽂件即可完成数据库连接池的初始化操作。</span></span><br><span class="line"><span class="comment">1、配置⽂件的名字必须是 c3p0-config.xml</span></span><br><span class="line"><span class="comment">2、初始化 ComboPooledDataSource 时，传⼊的参数必须是 c3p0-config.xml 中 named-config 标签的 name 属性值。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">c3p0-config</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">named-config</span> <span class="attr">name</span>=<span class="string">&quot;testc3p0&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 指定连接数据源的基本属性 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>&gt;</span>root<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span>&gt;</span>jdbc:mysql://localhost:3306/springboot?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!-- 若数据库中连接数不足时, 一次向数据库服务器申请多少个连接 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;acquireIncrement&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 初始化数据库连接池时连接的数量 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialPoolSize&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 数据库连接池中的最小的数据库连接数 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minPoolSize&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 数据库连接池中的最大的数据库连接数 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span>&gt;</span>10<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">named-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c3p0-config</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">     ComboPooledDataSource dataSource = <span class="keyword">new</span> ComboPooledDataSource(<span class="string">&quot;testc3p0&quot;</span>);</span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         Connection connection = dataSource.getConnection();</span><br><span class="line">         System.out.println(connection);</span><br><span class="line">         connection.close();</span><br><span class="line">     &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>


<h2 id="DBUtils"><a href="#DBUtils" class="headerlink" title="DBUtils"></a>DBUtils</h2><p>DBUtils 可以帮助开发者完成数据的封装（结果集到 Java 对象的映射）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ResultHandler 接⼝是⽤来处理结果集，可以将查询到的结果集转换成 Java 对象，提供了 4 种实现类。</span></span><br><span class="line"><span class="comment">//BeanHandler 将结果集映射成 Java 对象</span></span><br><span class="line"><span class="comment">//BeanListHandler 将结果集映射成 List 集合 </span></span><br><span class="line"><span class="comment">//MapHandler 将结果集映射成 Map 对象</span></span><br><span class="line"><span class="comment">//MapListHandler 将结果集映射成 Map List 集合</span></span><br><span class="line">   </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    ComboPooledDataSource dataSource = <span class="keyword">new</span> ComboPooledDataSource(<span class="string">&quot;testc3p0&quot;</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Connection connection = dataSource.getConnection();</span><br><span class="line">        String sql = <span class="string">&quot;select * from book where id = 1&quot;</span>;</span><br><span class="line">        QueryRunner queryRunner = <span class="keyword">new</span> QueryRunner();</span><br><span class="line">        Book book = queryRunner.query(connection, sql, <span class="keyword">new</span> BeanHandler&lt;&gt;(Book.class));</span><br><span class="line">        System.out.println(book);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><p>术语：Start Transaction，End Transaction，Commit Transaction，Rollback Transaction</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       ComboPooledDataSource dataSource = <span class="keyword">new</span> ComboPooledDataSource(<span class="string">&quot;testc3p0&quot;</span>);</span><br><span class="line">       Connection connection = <span class="keyword">null</span>;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           connection = dataSource.getConnection();</span><br><span class="line">           <span class="comment">//JDBC中默认事务是自动提交的，false就不会自动提交</span></span><br><span class="line">           connection.setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line">           PreparedStatement ps1 = </span><br><span class="line">             connection.prepareStatement(<span class="string">&quot;insert into  book (author, name) values(?,?) &quot;</span>);</span><br><span class="line">           PreparedStatement ps2 = </span><br><span class="line">             connection.prepareStatement(<span class="string">&quot;insert into  book (author, name) values(?,?) &quot;</span>);</span><br><span class="line">         </span><br><span class="line">           ps1.setString(<span class="number">1</span>, <span class="string">&quot;薛之谦&quot;</span>);</span><br><span class="line">           ps1.setString(<span class="number">2</span>, <span class="string">&quot;狐狸&quot;</span>);</span><br><span class="line"></span><br><span class="line">           ps2.setString(<span class="number">1</span>, <span class="string">&quot;薛之谦&quot;</span>);</span><br><span class="line">           ps2.setString(<span class="number">2</span>, <span class="string">&quot;摩天大楼&quot;</span>);</span><br><span class="line">         </span><br><span class="line">           ps1.execute();</span><br><span class="line">           <span class="comment">//模拟异常</span></span><br><span class="line">           <span class="keyword">int</span> i = <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">           ps2.execute();</span><br><span class="line">       &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               connection.rollback();</span><br><span class="line">           &#125; <span class="keyword">catch</span> (SQLException e1) &#123;</span><br><span class="line">               e1.printStackTrace();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               connection.commit();</span><br><span class="line">               connection.close();</span><br><span class="line">           &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">               e.printStackTrace();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>


<h2 id="Http"><a href="#Http" class="headerlink" title="Http"></a>Http</h2><p><strong>Http请求</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Http请求消息结构:</span><br><span class="line">- 请求行</span><br><span class="line">- 请求方法</span><br><span class="line">- URL地址</span><br><span class="line">- 协议名</span><br><span class="line">- 请求头</span><br><span class="line">- 报文头包含若干个属性 格式为“属性名 : 属性值”，</span><br><span class="line">- 服务端据此获取客户端的基本信息</span><br><span class="line">- 请求体</span><br><span class="line">- 请求的参数，可以是json对象，也可以是前端表单生成的key=value&amp;key=value的字符串</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- 请求头</span><br><span class="line">  - 报文头包含若干个属性 格式为“属性名:属性值”，</span><br><span class="line">  - 服务端据此获取客户端的基本信息</span><br><span class="line">  </span><br><span class="line">- 常见的请求头</span><br><span class="line">  - Accept： 览器支持的 MIME 媒体类型, 比如 text/html,application/json,image/webp,/ 等</span><br><span class="line">  - Accept-Encoding: 浏览器发给服务器,声明浏览器支持的编码类型，gzip, deflate</span><br><span class="line">  - Accept-Language: 客户端接受的语言格式,比如 zh-CN</span><br><span class="line">  - Connection: keep-alive , 开启HTTP持久连接</span><br><span class="line">  - Host：服务器的域名</span><br><span class="line">  - Origin：告诉服务器请求从哪里发起的，仅包括协议和域名 CORS跨域请求中可以看到response有对应的header，Access-Control-Allow-Origin</span><br><span class="line">  - Referer：告诉服务器请求的原始资源的URI，其用于所有类型的请求，并且包括：协议+域名+查询参数； 很多抢购服务会用这个做限制，必须通过某个入来进来才有效</span><br><span class="line">  - User-Agent: 服务器通过这个请求头判断用户的软件的应用类型、操作系统、软件开发商以及版本号、浏览器内核信息等； 风控系统、反作弊系统、反爬虫系统等基本会采集这类信息做参考</span><br><span class="line">  - Cookie: 表示服务端给客户端传的http请求状态,也是多个key=value形式组合，比如登录后的令牌等</span><br><span class="line">  - Content-Type： HTTP请求提交的内容类型，一般只有post提交时才需要设置，比如文件上传，表单提交等</span><br></pre></td></tr></table></figure>
<p><strong>Http响应</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Http响应消息结构</span><br><span class="line">- 响应行</span><br><span class="line">- 报文协议及版本、状态码</span><br><span class="line">- 响应头</span><br><span class="line">- 报文头包含若干个属性 格式为“属性名:属性值”</span><br><span class="line">- 响应正文</span><br><span class="line">- 响应报文体，我们需要的内容，多种形式比如html、json、图片、视频文件等</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">响应</span><br><span class="line">- 报文头包含若干个属性 格式为“属性名:属性值”</span><br><span class="line"></span><br><span class="line">常见的响应头</span><br><span class="line">- Allow: 服务器支持哪些请求方法</span><br><span class="line">- Content-Length: 响应体的字节长度</span><br><span class="line">- Content-Type: 响应体的MIME类型</span><br><span class="line">- Content-Encoding: 设置数据使用的编码类型</span><br><span class="line">- Date: 设置消息发送的日期和时间</span><br><span class="line">- Expires: 设置响应体的过期时间,一个GMT时间，表示该缓存的有效时间</span><br><span class="line">- cache-control: Expires的作用一致，都是指明当前资源的有效期, 控制浏览器是否直接从浏览器缓存取数据还是重新发请求到服务器取数据,优先级高于Expires,控制粒度更细，如max-age=<span class="number">240</span>，即<span class="number">4</span>分钟</span><br><span class="line">- Location：表示客户应当到哪里去获取资源，一般同时设置状态代码为3xx</span><br><span class="line">- Server: 服务器名称</span><br><span class="line">- Transfer-Encoding：chunked 表示输出的内容长度不能确定，静态网页一般没，基本出现在动态网页里面</span><br><span class="line">- Access-Control-Allow-Origin: 定哪些站点可以参与跨站资源共享</span><br></pre></td></tr></table></figure>


<h2 id="Http常见请求-响应头content-type内容类型"><a href="#Http常见请求-响应头content-type内容类型" class="headerlink" title="Http常见请求/响应头content-type内容类型"></a>Http常见请求/响应头content-type内容类型</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- Content-type: 用来指定不同格式的请求响应信息，俗称 MIME媒体类型</span><br><span class="line">- 常见的取值</span><br><span class="line">  text/html ：HTML格式</span><br><span class="line">  text/plain ：纯文本格式</span><br><span class="line">  text/xml ： XML格式</span><br><span class="line">  image/gif ：gif图片格式 </span><br><span class="line">  image/jpeg ：jpg图片格式 </span><br><span class="line">  image/png：png图片格式</span><br><span class="line">  application/json：JSON数据格式 </span><br><span class="line">  application/pdf ：pdf格式 </span><br><span class="line">  application/octet-stream ：二进制流数据，一般是文件下载</span><br><span class="line">  application/x-www-form-urlencoded：form表单默认的提交数据的格式，会编码成key=value格式</span><br><span class="line">  multipart/form-data： 表单中需要上传文件的文件格式类型</span><br></pre></td></tr></table></figure>


<h2 id="JavaWeb常见面试题"><a href="#JavaWeb常见面试题" class="headerlink" title="JavaWeb常见面试题"></a>JavaWeb常见面试题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1. 说下servlet的生命周期</span><br><span class="line">  - 实例化-&gt; 使用构造方法创建对象</span><br><span class="line">  - 初始化-&gt; 执行init方法：Servlet 的生命期中，仅执行一次 init() 方法，它是在服务器装入 Servlet 时执行的,即第一次访问这个Servlet才执行</span><br><span class="line">  - 服务-&gt; 执行service方法，service() 方法是 Servlet 的核心。每当一个客户请求一个HttpServlet 对象，该对象的service() 方法就要被调用</span><br><span class="line">  - 销毁-&gt; 执行destroy方法,destroy() 方法仅执行一次，即在服务器停止且卸装 Servlet 时执行该方法</span><br><span class="line">  </span><br><span class="line">2. forward和redirect的区别</span><br><span class="line">  - 重定向会改变URL地址，请求转发不会改变URL地址</span><br><span class="line">  - 重定向不可以使用多个作用域的内容，请求转发可以</span><br><span class="line">  - 重定向可以用URL访问外部资源，请求转发只能跳转内部资源</span><br><span class="line">  - 重定向会触发多次请求；转发的话只在内部跳转</span><br><span class="line"></span><br><span class="line">3. 说下Cookie和Session的区别和联系</span><br><span class="line">  - cookie数据保存在客户端，session数据保存在服务端</span><br><span class="line">  - cookie不是很安全，容易泄露，因为以明文存储信息</span><br><span class="line">  - Cookie大小和数量存储有限制</span><br><span class="line"></span><br><span class="line">4. 客户端存储除了Cookie，还有什么？</span><br><span class="line">  - localStroage 和 sessionStorage</span><br><span class="line">  - sessionStorage为临时保存，而localStorage为永久保存</span><br></pre></td></tr></table></figure>


<h2 id="JDBC常见面试题"><a href="#JDBC常见面试题" class="headerlink" title="JDBC常见面试题"></a>JDBC常见面试题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1. 说下JDBC连接数据库的开发步骤</span><br><span class="line">  - 1.加载数据库连接驱动 </span><br><span class="line">  - 2.获取数据连接对象</span><br><span class="line">  - 3.获取语句对象, 会话对象有两种Statement和PreparedStatement </span><br><span class="line">  - 4.执行语句  </span><br><span class="line">  - 5.处理结果集  </span><br><span class="line">  - 6.关闭资源  rs.close()、st.close()、conn.close() 注意关闭顺序以及处理异常 </span><br><span class="line">    </span><br><span class="line">2. JDBC中的Statement 和PreparedStatement的区别</span><br><span class="line">  - PreparedStatement在执行之前会进行预编译</span><br><span class="line">  - 效率高于Statement,且能够有效防止SQL注入</span><br><span class="line">  - PreparedStatement支持?占位符而不是直接拼接，提高可读性</span><br><span class="line">  </span><br><span class="line">3. 数据库连接池工作原理和优点</span><br><span class="line">  - 先创建一定数量的连接对象存放在连接池</span><br><span class="line">  - 需要使用连接对象的时候，从连接池中请求一个空闲的连接</span><br><span class="line">  - 使用完毕之后，并不会把连接关闭，而是还给连接池</span><br><span class="line">  - 优点：系统响应速度加快，资源利用率高</span><br></pre></td></tr></table></figure>


<h2 id="Http常见面试题"><a href="#Http常见面试题" class="headerlink" title="Http常见面试题"></a>Http常见面试题</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">1. http请求 get和post的区别？</span><br><span class="line">  - get是用来从服务器上获取数据，而post是用来向服务器上传递数据</span><br><span class="line">  - get是不安全的，因为在传输过程中，数据被放在请求的URL中，post是放到body里面，对小白用户不可见</span><br><span class="line">  - get传输的数据量小，主要是由于受URL长度的限制；post可以传输大量的数据，一般上传文件只能用post</span><br><span class="line">  </span><br><span class="line">2. 浏览器输入一个地址，到页面展示中间经历了哪些处理</span><br><span class="line">  1、浏览器输入url, 解析url地址是否合法</span><br><span class="line">  2、浏览器检查是否有缓存, 如果有直接显示。如果没有跳到第三步。</span><br><span class="line">  3、在发送http请求前，需要域名解析（DNS解析），解析获取对应过的ip地址。</span><br><span class="line">  4、浏览器向服务器发起tcp链接，完成tcp三次握手</span><br><span class="line">  5、握手成功后，浏览器向服务器发送http请求</span><br><span class="line">  6、服务器收到处理的请求，将数据返回至浏览器</span><br><span class="line">  7、浏览器收到http响应。</span><br><span class="line">  8、浏览器解析响应。如果响应可以缓存，则存入缓存</span><br><span class="line">  9、浏览器进行页面渲染</span><br><span class="line"></span><br><span class="line">3. 你知道HTTP有哪些状态码吗,列举下 </span><br><span class="line">  200：成功</span><br><span class="line">  302：重定向</span><br><span class="line">  404：请求失败，基本都是路径拼接错误</span><br><span class="line">  400：请求没有进入到后台服务里，比如http报文有问题</span><br><span class="line">  502：无效的响应（基本上就是Tomcat没启好或者挂了）</span><br><span class="line"></span><br><span class="line">4. 你知道http和https的区别不，简单说下</span><br><span class="line">  - HTTPS &#x3D; HTTP + SSL</span><br><span class="line">  - https有ca证书，http一般没有</span><br><span class="line">  - http是超文本传输协议，信息是明文传输。https则是具有安全性的ssl加密传输协议</span><br><span class="line">  - http默认80端口，https默认443端口。</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/JavaWeb/" rel="tag">JavaWeb</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/01/17/Vue%20-%20router%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" rel="prev" title="Vue - router基本使用">
      <i class="fa fa-chevron-left"></i> Vue - router基本使用
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/01/19/Git/" rel="next" title="Git的使用">
      Git的使用 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#JavaWeb%E5%9F%BA%E7%A1%80"><span class="nav-number">1.</span> <span class="nav-text">JavaWeb基础</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Servlet"><span class="nav-number">1.1.</span> <span class="nav-text">Servlet</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Servlet%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">1.2.</span> <span class="nav-text">Servlet生命周期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ServletConfig"><span class="nav-number">1.3.</span> <span class="nav-text">ServletConfig</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ServletConfig-%E5%92%8C-ServletContext"><span class="nav-number">1.4.</span> <span class="nav-text">ServletConfig 和 ServletContext</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Servlet-%E7%9A%84%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="nav-number">1.5.</span> <span class="nav-text">Servlet 的层次结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP"><span class="nav-number">1.6.</span> <span class="nav-text">JSP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AC%E5%8F%91%E4%B8%8E%E9%87%8D%E5%AE%9A%E5%90%91"><span class="nav-number">1.7.</span> <span class="nav-text">转发与重定向</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Session"><span class="nav-number">1.8.</span> <span class="nav-text">Session</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Cookie"><span class="nav-number">1.9.</span> <span class="nav-text">Cookie</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Session-%E5%92%8C-Cookie-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">1.10.</span> <span class="nav-text">Session 和 Cookie 的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP-%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="nav-number">1.11.</span> <span class="nav-text">JSP 内置对象作用域</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EL-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">1.12.</span> <span class="nav-text">EL 表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSTL"><span class="nav-number">1.13.</span> <span class="nav-text">JSTL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Filter"><span class="nav-number">1.14.</span> <span class="nav-text">Filter</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Listener"><span class="nav-number">1.15.</span> <span class="nav-text">Listener</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="nav-number">1.16.</span> <span class="nav-text">文件上传</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="nav-number">1.17.</span> <span class="nav-text">文件下载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ajax"><span class="nav-number">1.18.</span> <span class="nav-text">Ajax</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSON"><span class="nav-number">1.19.</span> <span class="nav-text">JSON</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JDBC"><span class="nav-number">1.20.</span> <span class="nav-text">JDBC</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PreparedStatement"><span class="nav-number">1.21.</span> <span class="nav-text">PreparedStatement</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="nav-number">1.22.</span> <span class="nav-text">数据库连接池</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DBUtils"><span class="nav-number">1.23.</span> <span class="nav-text">DBUtils</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1"><span class="nav-number">1.24.</span> <span class="nav-text">事务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Http"><span class="nav-number">1.25.</span> <span class="nav-text">Http</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Http%E5%B8%B8%E8%A7%81%E8%AF%B7%E6%B1%82-%E5%93%8D%E5%BA%94%E5%A4%B4content-type%E5%86%85%E5%AE%B9%E7%B1%BB%E5%9E%8B"><span class="nav-number">1.26.</span> <span class="nav-text">Http常见请求&#x2F;响应头content-type内容类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaWeb%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="nav-number">1.27.</span> <span class="nav-text">JavaWeb常见面试题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JDBC%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="nav-number">1.28.</span> <span class="nav-text">JDBC常见面试题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Http%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="nav-number">1.29.</span> <span class="nav-text">Http常见面试题</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="xudukang"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">xudukang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">20</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xdk-nj" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xdk-nj" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">xudukang</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">111k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">1:41</span>
</div>

<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div> -->

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
